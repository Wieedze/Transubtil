<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sticky Slider Nav</title>
    <style>
        /* Styles CSS */
        .et-hero-tabs {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background-color:rgb(255, 255, 255);
            text-align: center;
        }

        .et-hero-tabs-container {
            display: flex;
            position: relative;
            justify-content: center;
            margin-top: 20px;
            color: rgb(0, 0, 0);
        }

        .et-hero-tab {
            padding: 10px 20px;
            margin: 0 10px;
            text-decoration: none;
            color: rgb(0, 0, 0);
            font-weight: bold;
            transition: color 0.3s ease;
        }

        .et-hero-tab:hover {
            color: rgb(0, 0, 0);
        }

        .et-slide {
            padding: 100px 20px;
            text-align: center;
            background-color: #fff;
            border-bottom: 1px solid #ddd;
            color: rgb(0, 0, 0);
        }

        .et-main {
            margin-top: 70px; /* Ajustez en fonction de la hauteur de votre navigation sticky */
        }

        .et-hero-tabs-container--top {
            position: fixed;
            top: 0;
            width: 100%;
            background-color: rgb(0, 0, 0);
            z-index: 1000;
        }

        .et-hero-tab-slider {
            position: absolute;
            bottom: 0;
            height: 2px;
            background-color:rgb(0, 0, 0);
            transition: all 0.3s ease;
        }
    </style>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        // Fonction pour définir le style du slider
        function setSliderCss() {
            if (this.currentTab) {
                let width = this.currentTab.outerWidth(); // Utilise outerWidth pour inclure le padding
                let left = this.currentTab.position().left; // Utilise position() pour le positionnement relatif
                $('.et-hero-tab-slider').css({
                    width: width,
                    left: left,
                    transition: 'all 0.3s ease' // Ajoute une transition fluide
                });
            }
        }

        // Fonction pour gérer le clic sur un onglet
        function onTabClick(event, element) {
            event.preventDefault();
            let scrollTop = $(element.attr('href')).offset().top - this.tabContainerHeight;
            $('html, body').animate({ scrollTop: scrollTop }, 600);
        }

        // Fonction pour trouver l'onglet actuel
        function findCurrentTabSelector() {
            let newCurrentId;
            let newCurrentTab;
            let self = this;
            $('.et-hero-tab').each(function() {
                let id = $(this).attr('href');
                let offsetTop = $(id).offset().top - self.tabContainerHeight;
                let offsetBottom = $(id).offset().top + $(id).height() - self.tabContainerHeight;
                if ($(window).scrollTop() > offsetTop && $(window).scrollTop() < offsetBottom) {
                    newCurrentId = id;
                    newCurrentTab = $(this);
                }
                $(this).attr('aria-selected', $(this).attr('href') === newCurrentId);
            });
            if (this.currentId != newCurrentId || this.currentId === null) {
                this.currentId = newCurrentId;
                this.currentTab = newCurrentTab;
                this.setSliderCss();
            }
        }
    </script>
</head>
<body>
    <!-- Section Hero -->
    <section class="et-hero-tabs">
        <h1>TRANSUBTIL RECORD</h1>
        <h3>Psychedelic Modern Music</h3>
        <div class="et-hero-tabs-container" role="tablist">
            <a class="et-hero-tab" href="#tab-es6" role="tab" aria-selected="false">Artistes</a>
            <a class="et-hero-tab" href="#tab-flexbox" role="tab" aria-selected="false">Musics</a>
            <a class="et-hero-tab" href="#tab-react" role="tab" aria-selected="false">Merchandising</a>
            <a class="et-hero-tab" href="#tab-angular" role="tab" aria-selected="false">Video</a>
            <a class="et-hero-tab" href="#tab-other" role="tab" aria-selected="false">Contact</a>
            <span class="et-hero-tab-slider" role="presentation"></span>
        </div>
    </section>
    <main class="et-main">
        <section class="et-slide" id="tab-es6">
            <%# <%= link_to "Découvrez nos artistes", artist_index_path %>
                <html lang="en">
                <head>
                <meta charset="utf-8">
                <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
                <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,700|Open+Sans">
                <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
                <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
                <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
                <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
                <style>
                    body {
                        font-family: "Open Sans", sans-serif;
                    }
                    h2 {
                        color: rgb(0, 0, 0);
                        text-align: center;
                        text-transform: uppercase;
                        font-family: "Roboto", sans-serif;
                        font-weight: bold;
                        position: relative;
                        margin: 30px 0 60px;
                    }
                    h2::after {
                        content: "";
                        width: 100px;
                        position: absolute;
                        margin: 0 auto;
                        height: 3px;
                        background:rgb(0, 0, 0);
                        left: 0;
                        right: 0;
                        bottom: -10px;
                    }
                    .col-center {
                        margin: 0 auto;
                        float: none !important;
                    }
                    .carousel {
                        padding: 0 70px;
                    }
                    .carousel .carousel-item {
                        color: #999;
                        font-size: 22px;
                        text-align: center;
                        overflow: hidden;
                        min-height: 400px;
                    }
                    .carousel .carousel-item .img-box {
                        width: 300px;
                        height: 300px;
                        margin: 0 auto;
                        padding: 5px;
                        border: 1px solid #ddd;
                        border-radius: 50%;
                    }
                    .carousel .img-box img {
                        width: 100%;
                        height: 100%;
                        display: block;
                        border-radius: 50%;
                    }
                    .carousel .testimonial {
                        padding: 30px 0 10px;
                    }
                    .carousel .overview {	
                        font-style: italic;
                    }
                    .carousel .overview b {
                        text-transform: uppercase;
                        color:rgb(0, 0, 0);
                    }
                    .carousel-control-prev, .carousel-control-next {
                        width: 40px;
                        height: 40px;
                        margin-top: -20px;
                        top: 50%;
                        background: none;
                    }
                    .carousel-control-prev i, .carousel-control-next i {
                        font-size: 68px;
                        line-height: 42px;
                        position: absolute;
                        display: inline-block;
                        color: rgba(0, 0, 0, 0.8);
                        text-shadow: 0 3px 3px #e6e6e6, 0 0 0 #000;
                    }
                    .carousel-indicators {
                        bottom: -40px;
                    }
                    .carousel-indicators li, .carousel-indicators li.active {
                        width: 12px;
                        height: 12px;
                        margin: 1px 3px;
                        border-radius: 50%;
                        border: none;
                    }
                    .carousel-indicators li {	
                        background: #999;
                        border-color: transparent;
                        box-shadow: inset 0 2px 1px rgba(0,0,0,0.2);
                    }
                    .carousel-indicators li.active {	
                        background: #555;		
                        box-shadow: inset 0 2px 1px rgba(0,0,0,0.2);
                    }
                    a h1 {
                        all: unset; /* Réinitialise tous les styles */
                        display: inline; /* Évite que le h1 casse la mise en page */
                    }
                    a {
                        text-decoration: none; /* Supprime le soulignement */
                        color: inherit; /* Garde la couleur du texte environnant */
                    }

                    a h1 {
                        color: inherit; /* Garde la couleur du texte par défaut */
                        text-decoration: none; /* Supprime le soulignement */
                    }

                    a h1:hover {
                        color: inherit;
                        text-decoration: none;
                    }
                    


                    </style>
                </head>
                <body>
                <div class="container-xl">
                    <div class="row">
                        <div class="col-lg-8 mx-auto">
                            <h1>Artistes</h1>
                            </br>
                            <div id="myCarousel" class="carousel slide" data-ride="carousel">
                                <!-- Carousel indicators -->
                                <ol class="carousel-indicators">
                                    <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                                    <li data-target="#myCarousel" data-slide-to="1"></li>
                                    <li data-target="#myCarousel" data-slide-to="2"></li>
                                    <li data-target="#myCarousel" data-slide-to="3"></li>
                                    <li data-target="#myCarousel" data-slide-to="4"></li>
                                    <li data-target="#myCarousel" data-slide-to="5"></li>
                                </ol> 
                                    <div class="carousel-inner">
                                    <% @artists.each_with_index do |artist, index| %>
                                    
                                        <div class="carousel-item <%= 'active' if index == 0 %>">
                                        <%= link_to artist_path(artist["id"]) do %>
                                            <div class="img-box">
                                            <%= image_tag asset_path(artist["image_url"].split('/').last), alt: artist["name"] %><!-- Remplacez `image_url` et `name` par les attributs réels -->
                                            </div>
                                        <% end %>
                                        <p class="testimonial"><%= artist["description"] %></p> <!-- Remplacez `bio` par l'attribut qui contient la bio de l'artiste -->
                                        <p class="overview"><b><%= artist["name"] %></b> Live act</p>
                                        </div>
                                    <% end %>
                                    </div>
                                </div>
</div>

                                <!-- Carousel controls -->
                                <a class="carousel-control-prev" href="#myCarousel" data-slide="prev">
                                    <i class="fa fa-angle-left"></i>
                                </a>
                                <a class="carousel-control-next" href="#myCarousel" data-slide="next">
                                    <i class="fa fa-angle-right"></i>
                                </a>
                            </div>   <!-- Wrapper for carousel items -->
                    
                            
                        </div>
                    </div>
                </div>
                </body>
                </html>
            
        </section>
        <section class="et-slide" id="tab-flexbox">
            <h1>Musics</h1>
            <h3>Écoutez nos dernières musiques</h3>
        </section>
        <section class="et-slide" id="tab-react">
            
            <%= link_to merchandising_index_path do %>
            
            <h1>Merchandising</h1>
            <% end %>
            <h3>Achetez nos produits</h3>
        </section>
        <section class="et-slide" id="tab-angular">
            <h1>Video</h1>
            <h3>Regardez nos vidéos</h3>
        </section>
        <section class="et-slide" id="tab-other">
            <h1>Contact</h1>
            <h3>Prenez contact avec nous</h3>
        </section>
    </main>
</body>
<script>
  // Fonction de gestion du carrousel
  document.addEventListener('DOMContentLoaded', function() {
    const prevButton = document.querySelector('.prev');
    const nextButton = document.querySelector('.next');
    const carouselInner = document.querySelector('.carousel-inner');
    let index = 0;

    const totalItems = document.querySelectorAll('.carousel-item').length;

    prevButton.addEventListener('click', function() {
      if (index > 0) {
        index--;
      } else {
        index = totalItems - 1;
      }
      updateCarousel();
    });

    nextButton.addEventListener('click', function() {
      if (index < totalItems - 1) {
        index++;
      } else {
        index = 0;
      }
      updateCarousel();
    });

    function updateCarousel() {
      carouselInner.style.transform = `translateX(-${index * 100}%)`;
    }
  });
</script>
</html>